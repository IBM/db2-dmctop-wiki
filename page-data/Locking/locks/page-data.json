{
    "componentChunkName": "component---src-pages-locking-locks-mdx",
    "path": "/Locking/locks/",
    "result": {"pageContext":{"frontmatter":{"description":"Locking / Locks","title":"Locking / Locks"},"relativePagePath":"/Locking/locks.mdx","titleType":"page","MdxNode":{"id":"6e525854-a9d8-58f8-9061-0ddcc115146c","children":[],"parent":"3fe14d15-0bee-5e67-84b0-3a4bb5f9ba5d","internal":{"content":"# Purpose\r\n\r\n# Metric shown\r\n\r\n## Grid\r\n\r\n\r\n<hr />\r\n\r\n### Locks held\r\n\r\nThe number of locks in the currently connected database.\r\n\r\n```\r\nSELECT COUNT(*) AS LOCKS_HELD \r\nFROM   TABLE(MON_GET_LOCKS(NULL, #MEMBER#))\r\n```\r\n\r\n**Source:** [MON_GET_LOCKS](https://www.ibm.com/docs/en/db2/11.5?topic=mpf-mon-get-locks-table-function-list-all-locks-in-currently-connected-database)\r\n\r\n\r\n<hr />\r\n\r\n### Agents waiting\r\n\r\nThe number of locks that each application's agents (that are connected to the current database) are waiting to acquire.\r\n\r\n```\r\nSELECT COUNT(*) AS LOCKS_WAIT \r\nFROM   TABLE(MON_GET_APPL_LOCKWAIT(NULL, #MEMBER#))\r\n```\r\n\r\n**Source:** [MON_GET_APPL_LOCKWAIT](https://www.ibm.com/docs/en/db2woc?topic=mpf-mon-get-appl-lockwait-table-function-get-information-about-locks-which-application-is-waiting)\r\n\r\n\r\n<hr />\r\n\r\n### Lock list storage %\r\n\r\nThe average number of locks per byte.\r\n\r\n= LOCKS_HELD / LOCK_LIST_IN_USE_BYTES \r\n\r\nLOCKS_HELD = \r\n```\r\nSELECT COUNT(*) AS LOCKS_HELD \r\nFROM   TABLE(MON_GET_LOCKS(NULL, #MEMBER#))\r\n```\r\n\r\n\r\n**Source:** \r\n\r\nLOCK_LIST_IN_USE_BYTES = [MON_GET_DATABASE](https://www.ibm.com/docs/en/db2/11.5?topic=functions-mon-get-database-get-database-metrics)(#MEMBER#).SUM([LOCK_LIST_IN_USE](https://www.ibm.com/docs/en/db2/11.5?topic=reference-l#r0001282))\r\n\r\n[MON_GET_LOCKS](https://www.ibm.com/docs/en/db2/11.5?topic=mpf-mon-get-locks-table-function-list-all-locks-in-currently-connected-database)\r\n\r\n\r\n\r\n\r\n\r\n<hr />\r\n\r\n### Applications connected\r\n\r\nThe number of connections from the given database member.\r\n\r\n```\r\nSELECT COUNT(*) AS APPL_CONNECTED \r\nFROM   TABLE(MON_GET_CONNECTION(NULL, #MEMBER#))\r\n```\r\n\r\n**Source:** [MON_GET_CONNECTION](https://www.ibm.com/docs/en/db2/11.5?topic=functions-mon-get-connection-get-connection-metrics)\r\n\r\n\r\n## Table\r\n\r\n\r\n<hr />\r\n\r\n### Application handle\r\n\r\nA system-wide unique ID for the application. \r\n\r\n**Source:** [MON_GET_LOCKS](https://www.ibm.com/docs/en/db2/11.5?topic=mpf-mon-get-locks-table-function-list-all-locks-in-currently-connected-database)(NULL,#MEMBER#).[APPLICATION_HANDLE](https://www.ibm.com/docs/en/db2/11.5?topic=reference-#r0054410)\r\n\r\n\r\n<hr />\r\n\r\n### Application name\r\n\r\nThe name of the application running at the client.\r\n\r\n**Source:** [MON_GET_AGENT](https://www.ibm.com/docs/en/db2/10.5?topic=mpf-mon-get-agent-list-agents-running-in-service-class)(NULL,NULL,NULL,#MEMBER#).[APPLICATION_NAME](https://www.ibm.com/docs/en/db2/10.5?topic=reference-#r0001165)\r\n\r\n\r\n<hr />\r\n\r\n### Event state\r\n\r\nState of the event last processed by this agent. The possible values are as follows:\r\n* EXECUTING\r\n* IDLE\r\n\r\n**Source:** [MON_GET_AGENT](https://www.ibm.com/docs/en/db2/10.5?topic=mpf-mon-get-agent-list-agents-running-in-service-class)(NULL,NULL,NULL,#MEMBER#).[EVENT_STATE](https://www.ibm.com/docs/en/db2/10.5?topic=mpf-mon-get-agent-list-agents-running-in-service-class)\r\n\r\n\r\n<hr />\r\n\r\n### Event type\r\n\r\nType of event last processed by this agent. The possible values are as follows:\r\n* ACQUIRE\r\n* PROCESS\r\n* WAIT\r\n\r\n**Source:** [MON_GET_AGENT](https://www.ibm.com/docs/en/db2/10.5?topic=mpf-mon-get-agent-list-agents-running-in-service-class)(NULL,NULL,NULL,#MEMBER#).[EVENT_TYPE](https://www.ibm.com/docs/en/db2/10.5?topic=mpf-mon-get-agent-list-agents-running-in-service-class)\r\n\r\n\r\n<hr />\r\n\r\n### Event object\r\n\r\nObject of the event last processed by this agent. The possible values are as follows:\r\n* COMPRESSION_DICTIONARY_BUILD\r\n* IMPLICIT_REBIND\r\n* INDEX_RECREATE\r\n* LOCK\r\n* LOCK_ESCALATION\r\n* QP_QUEUE\r\n* REMOTE_REQUEST\r\n* REQUEST\r\n* ROUTINE\r\n* WLM_QUEUE\r\n\r\n\r\n**Source:** [MON_GET_AGENT](https://www.ibm.com/docs/en/db2/10.5?topic=mpf-mon-get-agent-list-agents-running-in-service-class)(NULL,NULL,NULL,#MEMBER#).[EVENT_OBJECT](https://www.ibm.com/docs/en/db2/10.5?topic=mpf-mon-get-agent-list-agents-running-in-service-class)\r\n\r\n\r\n<hr />\r\n\r\n### Object name\r\n\r\nThe name of event object.\r\n\r\n= `<TABSCHEMA>.<TABNAME>`\r\n\r\n**Source:** \r\n\r\nTABSCHEMA = [MON_GET_TABLE](https://www.ibm.com/docs/en/db2/11.5?topic=functions-mon-get-table-get-table-metrics)(NULL,NULL, #MEMBER#).[TABSCHEMA](https://www.ibm.com/docs/en/db2/11.5?topic=reference-t#r0001311)\r\n\r\nTABNAME = [MON_GET_TABLE](https://www.ibm.com/docs/en/db2/11.5?topic=functions-mon-get-table-get-table-metrics)(NULL,NULL, #MEMBER#).[TABNAME](https://www.ibm.com/docs/en/db2/11.5?topic=reference-t#r0001310)\r\n\r\n\r\n\r\n<hr />\r\n\r\n### Lock mode\r\n\r\nThe type of lock being held.\r\n\r\n**Source:** [MON_GET_LOCKS](https://www.ibm.com/docs/en/db2/11.5?topic=mpf-mon-get-locks-table-function-list-all-locks-in-currently-connected-database)(NULL,#MEMBER#).[LOCK_MODE](https://www.ibm.com/docs/en/db2/11.5?topic=reference-l#r0001286)\r\n\r\n\r\n<hr />\r\n\r\n### Object type\r\n\r\nThe type of object against which the application holds a lock (for object-lock-level information), or the type of object for which the application is waiting to obtain a lock (for application-level and deadlock-level information).\r\n\r\n**Source:** [MON_GET_LOCKS](https://www.ibm.com/docs/en/db2/11.5?topic=mpf-mon-get-locks-table-function-list-all-locks-in-currently-connected-database)(NULL,#MEMBER#).[LOCK_OBJECT_TYPE](https://www.ibm.com/docs/en/db2/11.5?topic=reference-l#r0001288)\r\n\r\n\r\n<hr />\r\n\r\n### Lock status\r\n\r\nThe internal status of the lock.\r\n\r\n**Source:** [MON_GET_LOCKS](https://www.ibm.com/docs/en/db2/11.5?topic=mpf-mon-get-locks-table-function-list-all-locks-in-currently-connected-database)(NULL,#MEMBER#).[LOCK_STATUS](https://www.ibm.com/docs/en/db2/11.5?topic=reference-l#r0001287)\r\n\r\n\r\n<hr />\r\n\r\n### Lock count\r\n\r\nThe number of locks currently held.\r\n\r\n**Source:** [MON_GET_LOCKS](https://www.ibm.com/docs/en/db2/11.5?topic=mpf-mon-get-locks-table-function-list-all-locks-in-currently-connected-database)(NULL,#MEMBER#).[LOCK_COUNT](https://www.ibm.com/docs/en/db2/11.5?topic=reference-l#r0009815)\r\n\r\n\r\n<hr />\r\n\r\n### Is blocker\r\n\r\nFlag (Yes or No) indicating whether the transaction holding this lock is itself blocked waiting on another lock.\r\n\r\n\r\n<hr />\r\n\r\n### Locked by\r\n\r\nThe application that is holding the lock.\r\n\r\nIf the LOCK_STATUS column is W or C, then get the application handle id of the first object from the lock list with LOCK_STATUS equals to G with given LOCK_NAME.\r\n\r\n**Source:**\r\n\r\nLOCK_STATUS  = [MON_GET_LOCKS](https://www.ibm.com/docs/en/db2/11.5?topic=mpf-mon-get-locks-table-function-list-all-locks-in-currently-connected-database)(NULL,#MEMBER#).[LOCK_STATUS](https://www.ibm.com/docs/en/db2/11.5?topic=reference-l#r0001287)\r\n\r\nLOCK_NAME = [MON_GET_LOCKS](https://www.ibm.com/docs/en/db2/11.5?topic=mpf-mon-get-locks-table-function-list-all-locks-in-currently-connected-database)(NULL,#MEMBER#).[LOCK_NAME](https://www.ibm.com/docs/en/db2/11.5?topic=reference-l#r0009819)\r\n\r\n\r\n\r\n<hr />\r\n\r\n### Tablespace name\r\n\r\nThe name of a table space.\r\n\r\n**Source:** [MON_GET_TABLESPACE](https://www.ibm.com/docs/en/db2oc?topic=functions-mon-get-tablespace-get-table-space-metrics).[TBSP_NAME](https://www.ibm.com/docs/en/db2oc?topic=reference-t#r0001295)\r\n\r\n","type":"Mdx","contentDigest":"851c37a3948798167c7d391f05da0cb5","owner":"gatsby-plugin-mdx","counter":124},"frontmatter":{"description":"Locking / Locks","title":"Locking / Locks"},"exports":{},"rawBody":"# Purpose\r\n\r\n# Metric shown\r\n\r\n## Grid\r\n\r\n\r\n<hr />\r\n\r\n### Locks held\r\n\r\nThe number of locks in the currently connected database.\r\n\r\n```\r\nSELECT COUNT(*) AS LOCKS_HELD \r\nFROM   TABLE(MON_GET_LOCKS(NULL, #MEMBER#))\r\n```\r\n\r\n**Source:** [MON_GET_LOCKS](https://www.ibm.com/docs/en/db2/11.5?topic=mpf-mon-get-locks-table-function-list-all-locks-in-currently-connected-database)\r\n\r\n\r\n<hr />\r\n\r\n### Agents waiting\r\n\r\nThe number of locks that each application's agents (that are connected to the current database) are waiting to acquire.\r\n\r\n```\r\nSELECT COUNT(*) AS LOCKS_WAIT \r\nFROM   TABLE(MON_GET_APPL_LOCKWAIT(NULL, #MEMBER#))\r\n```\r\n\r\n**Source:** [MON_GET_APPL_LOCKWAIT](https://www.ibm.com/docs/en/db2woc?topic=mpf-mon-get-appl-lockwait-table-function-get-information-about-locks-which-application-is-waiting)\r\n\r\n\r\n<hr />\r\n\r\n### Lock list storage %\r\n\r\nThe average number of locks per byte.\r\n\r\n= LOCKS_HELD / LOCK_LIST_IN_USE_BYTES \r\n\r\nLOCKS_HELD = \r\n```\r\nSELECT COUNT(*) AS LOCKS_HELD \r\nFROM   TABLE(MON_GET_LOCKS(NULL, #MEMBER#))\r\n```\r\n\r\n\r\n**Source:** \r\n\r\nLOCK_LIST_IN_USE_BYTES = [MON_GET_DATABASE](https://www.ibm.com/docs/en/db2/11.5?topic=functions-mon-get-database-get-database-metrics)(#MEMBER#).SUM([LOCK_LIST_IN_USE](https://www.ibm.com/docs/en/db2/11.5?topic=reference-l#r0001282))\r\n\r\n[MON_GET_LOCKS](https://www.ibm.com/docs/en/db2/11.5?topic=mpf-mon-get-locks-table-function-list-all-locks-in-currently-connected-database)\r\n\r\n\r\n\r\n\r\n\r\n<hr />\r\n\r\n### Applications connected\r\n\r\nThe number of connections from the given database member.\r\n\r\n```\r\nSELECT COUNT(*) AS APPL_CONNECTED \r\nFROM   TABLE(MON_GET_CONNECTION(NULL, #MEMBER#))\r\n```\r\n\r\n**Source:** [MON_GET_CONNECTION](https://www.ibm.com/docs/en/db2/11.5?topic=functions-mon-get-connection-get-connection-metrics)\r\n\r\n\r\n## Table\r\n\r\n\r\n<hr />\r\n\r\n### Application handle\r\n\r\nA system-wide unique ID for the application. \r\n\r\n**Source:** [MON_GET_LOCKS](https://www.ibm.com/docs/en/db2/11.5?topic=mpf-mon-get-locks-table-function-list-all-locks-in-currently-connected-database)(NULL,#MEMBER#).[APPLICATION_HANDLE](https://www.ibm.com/docs/en/db2/11.5?topic=reference-#r0054410)\r\n\r\n\r\n<hr />\r\n\r\n### Application name\r\n\r\nThe name of the application running at the client.\r\n\r\n**Source:** [MON_GET_AGENT](https://www.ibm.com/docs/en/db2/10.5?topic=mpf-mon-get-agent-list-agents-running-in-service-class)(NULL,NULL,NULL,#MEMBER#).[APPLICATION_NAME](https://www.ibm.com/docs/en/db2/10.5?topic=reference-#r0001165)\r\n\r\n\r\n<hr />\r\n\r\n### Event state\r\n\r\nState of the event last processed by this agent. The possible values are as follows:\r\n* EXECUTING\r\n* IDLE\r\n\r\n**Source:** [MON_GET_AGENT](https://www.ibm.com/docs/en/db2/10.5?topic=mpf-mon-get-agent-list-agents-running-in-service-class)(NULL,NULL,NULL,#MEMBER#).[EVENT_STATE](https://www.ibm.com/docs/en/db2/10.5?topic=mpf-mon-get-agent-list-agents-running-in-service-class)\r\n\r\n\r\n<hr />\r\n\r\n### Event type\r\n\r\nType of event last processed by this agent. The possible values are as follows:\r\n* ACQUIRE\r\n* PROCESS\r\n* WAIT\r\n\r\n**Source:** [MON_GET_AGENT](https://www.ibm.com/docs/en/db2/10.5?topic=mpf-mon-get-agent-list-agents-running-in-service-class)(NULL,NULL,NULL,#MEMBER#).[EVENT_TYPE](https://www.ibm.com/docs/en/db2/10.5?topic=mpf-mon-get-agent-list-agents-running-in-service-class)\r\n\r\n\r\n<hr />\r\n\r\n### Event object\r\n\r\nObject of the event last processed by this agent. The possible values are as follows:\r\n* COMPRESSION_DICTIONARY_BUILD\r\n* IMPLICIT_REBIND\r\n* INDEX_RECREATE\r\n* LOCK\r\n* LOCK_ESCALATION\r\n* QP_QUEUE\r\n* REMOTE_REQUEST\r\n* REQUEST\r\n* ROUTINE\r\n* WLM_QUEUE\r\n\r\n\r\n**Source:** [MON_GET_AGENT](https://www.ibm.com/docs/en/db2/10.5?topic=mpf-mon-get-agent-list-agents-running-in-service-class)(NULL,NULL,NULL,#MEMBER#).[EVENT_OBJECT](https://www.ibm.com/docs/en/db2/10.5?topic=mpf-mon-get-agent-list-agents-running-in-service-class)\r\n\r\n\r\n<hr />\r\n\r\n### Object name\r\n\r\nThe name of event object.\r\n\r\n= `<TABSCHEMA>.<TABNAME>`\r\n\r\n**Source:** \r\n\r\nTABSCHEMA = [MON_GET_TABLE](https://www.ibm.com/docs/en/db2/11.5?topic=functions-mon-get-table-get-table-metrics)(NULL,NULL, #MEMBER#).[TABSCHEMA](https://www.ibm.com/docs/en/db2/11.5?topic=reference-t#r0001311)\r\n\r\nTABNAME = [MON_GET_TABLE](https://www.ibm.com/docs/en/db2/11.5?topic=functions-mon-get-table-get-table-metrics)(NULL,NULL, #MEMBER#).[TABNAME](https://www.ibm.com/docs/en/db2/11.5?topic=reference-t#r0001310)\r\n\r\n\r\n\r\n<hr />\r\n\r\n### Lock mode\r\n\r\nThe type of lock being held.\r\n\r\n**Source:** [MON_GET_LOCKS](https://www.ibm.com/docs/en/db2/11.5?topic=mpf-mon-get-locks-table-function-list-all-locks-in-currently-connected-database)(NULL,#MEMBER#).[LOCK_MODE](https://www.ibm.com/docs/en/db2/11.5?topic=reference-l#r0001286)\r\n\r\n\r\n<hr />\r\n\r\n### Object type\r\n\r\nThe type of object against which the application holds a lock (for object-lock-level information), or the type of object for which the application is waiting to obtain a lock (for application-level and deadlock-level information).\r\n\r\n**Source:** [MON_GET_LOCKS](https://www.ibm.com/docs/en/db2/11.5?topic=mpf-mon-get-locks-table-function-list-all-locks-in-currently-connected-database)(NULL,#MEMBER#).[LOCK_OBJECT_TYPE](https://www.ibm.com/docs/en/db2/11.5?topic=reference-l#r0001288)\r\n\r\n\r\n<hr />\r\n\r\n### Lock status\r\n\r\nThe internal status of the lock.\r\n\r\n**Source:** [MON_GET_LOCKS](https://www.ibm.com/docs/en/db2/11.5?topic=mpf-mon-get-locks-table-function-list-all-locks-in-currently-connected-database)(NULL,#MEMBER#).[LOCK_STATUS](https://www.ibm.com/docs/en/db2/11.5?topic=reference-l#r0001287)\r\n\r\n\r\n<hr />\r\n\r\n### Lock count\r\n\r\nThe number of locks currently held.\r\n\r\n**Source:** [MON_GET_LOCKS](https://www.ibm.com/docs/en/db2/11.5?topic=mpf-mon-get-locks-table-function-list-all-locks-in-currently-connected-database)(NULL,#MEMBER#).[LOCK_COUNT](https://www.ibm.com/docs/en/db2/11.5?topic=reference-l#r0009815)\r\n\r\n\r\n<hr />\r\n\r\n### Is blocker\r\n\r\nFlag (Yes or No) indicating whether the transaction holding this lock is itself blocked waiting on another lock.\r\n\r\n\r\n<hr />\r\n\r\n### Locked by\r\n\r\nThe application that is holding the lock.\r\n\r\nIf the LOCK_STATUS column is W or C, then get the application handle id of the first object from the lock list with LOCK_STATUS equals to G with given LOCK_NAME.\r\n\r\n**Source:**\r\n\r\nLOCK_STATUS  = [MON_GET_LOCKS](https://www.ibm.com/docs/en/db2/11.5?topic=mpf-mon-get-locks-table-function-list-all-locks-in-currently-connected-database)(NULL,#MEMBER#).[LOCK_STATUS](https://www.ibm.com/docs/en/db2/11.5?topic=reference-l#r0001287)\r\n\r\nLOCK_NAME = [MON_GET_LOCKS](https://www.ibm.com/docs/en/db2/11.5?topic=mpf-mon-get-locks-table-function-list-all-locks-in-currently-connected-database)(NULL,#MEMBER#).[LOCK_NAME](https://www.ibm.com/docs/en/db2/11.5?topic=reference-l#r0009819)\r\n\r\n\r\n\r\n<hr />\r\n\r\n### Tablespace name\r\n\r\nThe name of a table space.\r\n\r\n**Source:** [MON_GET_TABLESPACE](https://www.ibm.com/docs/en/db2oc?topic=functions-mon-get-tablespace-get-table-space-metrics).[TBSP_NAME](https://www.ibm.com/docs/en/db2oc?topic=reference-t#r0001295)\r\n\r\n","fileAbsolutePath":"C:/Users/0G6714649/Documents/dmctop/dmctop-wiki/src/pages/Locking/locks.mdx"}}},
    "staticQueryHashes": ["1364590287","137577622","2102389209","2456312558","2746626797","3018647132","3037994772","768070550"]}